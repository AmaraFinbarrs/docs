---
title: 'Query Insights'
subtitle: 'Find and optimize long-running queries in your application.'
---

PlanetScale Insights gives you a detailed look into the active queries running against your database. This in-dashboard tool allows you to identify queries that are running too often, too long, returning too much data, and more. You can scroll through the performance graph to detect the time that a query was impacted, and, if applicable, the [Deploy Request](/concepts/deploy-requests) that affected it.

<VideoBlock src='/img/docs/insights.mp4' />
<p align='center'><i>This video shows an example Insights page. All explanations are covered in this doc.</i></p>

<InfoBlock type="note">
  Insights on the free Hobby plan are limited to the previous 24 hours. To unlock the full seven days of analytics, <a href="/concepts/billing">upgrade to a paid plan</a>.
</InfoBlock>

## Insights page overview

PlanetScale Insights is currently in beta. You can opt-in on your Organization Settings page at `https://app.planetscale.com/<YOUR-ORG>/settings/beta-features`.

To view Insights for your database, head to the [PlanetScale dashboard](https://app.planetscale.com), select your database, and click the "**Query insights**" tab.

Below is an overview of what you'll find on this page. If you'd like to see a practical example of how to use Insights to debug a performance issue, check out our [Announcing Insights blog post](https://planetscale.com/blog/announcing-insights).

### Branch selection

![PlanetScale Insights branch selection](/img/docs/insights-branches.png) 

This dropdown on the top right lets you select which branch you want to analyze. The selection applies to the entire Insights page.

### Insights graph

![PlanetScale Insights graph](/img/docs/insights-graph.png)

This graph depicts your database activity over a 24-hour period. You'll also see links to any deploy requests at the time that you deployed them.

You can click the dates listed above to scroll through the past seven days. If you're on our free Hobby plan, activity is limited to the previous 24 hours. 

### Graph metrics selection

![PlanetScale Insights graph metrics selection - rows written](/img/docs/insights-graph-metrics-selection.png) 

The dropdown on the top left lets you select what metric you want to see on the graph. You can hover over a specific time on the graph to see the metric(s) for that time period.

The available options are:

- **Rows read per second** &mdash; Total count followed by rows read per second.
- **Rows written per second** &mdash; Total count followed by rows written per second.
- **Query latency (ms)** &mdash; Two line charts showing p50 and p90 latency. This means 50% and 90% of requests, respectively, completed faster than the time listed.
- **Queries per second** &mdash; Total queries per second.

### Queries list

![PlanetScale Insights recent queries list](/img/docs/insights-query-list.png)

The table underneath the graph shows all queries performed on your database in the past 24 hours. To further narrow down query analysis, you can select a time range from the above graph to restrict the table to queries that happened in that time frame.

![Insights queries selected time range](/img/docs/insights-selected-time-frame.png)

Queries over 1000 ms are clickable for a deeper look. You can also sort the columns for quick analysis.

You may see some placeholder values in the queries, such as `:v1`. This is because we consider the actual data private and normalize it away.

**Available query statistics**:

- **Keyspace** &mdash; The table(s) being queried or modified.
- **Count** &mdash; The number of times this query has run.
- **Total Time (ms)** &mdash; The total time the query has run in milliseconds.
- **Time per query (ms)** &mdash; The number of milliseconds each individual query takes to run. This is calculated from total time divided by count.
- **Rows returned** &mdash; The number of rows fetched by a `SELECT` statement.
- **Rows read** &mdash; The total number of rows read. This is the number that directly affects your [rows read billing calculation](/concepts/billing#understanding-rows-read). 
- **Rows affected** &mdash; The number of rows modified by an `INSERT`, `UPDATE`, or `DELETE` statement.

You can customize the metrics that show up on the Queries list by clicking the "Columns" dropdown.

### Query deep dive

Clicking on a query in the Queries list will open a new page with more information about that query, such as:

- Query pattern
- Slow instances of the query during the selected time frame
- Query tags
- An option to generate the [query `EXPLAIN` plan](https://dev.mysql.com/blog-archive/mysql-explain-analyze/)

If you toggle "Show explain plan" you can generate the execution plan for the selected query. You may have to fill in some sample values, designated with placeholders like `:v1`.

If you'd like to further interact with the query can, click "Open query in web console" and you'll be taken to your in-dashboard web console where you can run the `EXPLAIN` plan.

![PlanetScale Insights query pattern w/ explain plan](/img/docs/insights-explain-plan.png)  
![PlanetScale Insights explain plan](/img/docs/insights-explain-plan-2.png)  

## Need help?

Get help from [PlanetScale's support team](https://www.planetscale.com/support), or join our [GitHub Discussion board](https://github.com/planetscale/discussion/discussions) to see how others are using PlanetScale.