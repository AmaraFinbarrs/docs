---
title: 'Connect a PHP application to PlanetScale'
subtitle: 'Spin up a PlanetScale MySQL serverless database in seconds and connect to a PHP application'
---

## Introduction

In this tutorial, you'll learn how to connect a PHP application to a PlanetScale MySQL database using a sample PHP starter app.

## Prerequisites

- [PHP](https://www.php.net/manual/en/install.php) &mdash; This tutorial uses `v8.1`
- [Composer](https://getcomposer.org/)
- A [free PlanetScale account](https://auth.planetscale.com/sign-up)
- [PlanetScale CLI](https://github.com/planetscale/cli) &mdash; You can also follow this tutorial using just the PlanetScale admin dashboard, but the CLI will make setup quicker.

## Set up the PHP app

This guide will integrate [a simple PHP app](https://github.com/planetscale/php-example.git) with PlanetScale that will display a list of products stored in the database. If you have an existing application, you can also use that.

1. Clone the starter PHP application:

```bash
git clone https://github.com/planetscale/php-example.git
```

2. Enter into the folder and install the dependencies:

```bash
cd php-example
composer install
```

1. Rename the `.env.example` file to `.env`:

```bash
mv .env.example .env
``` 

1. Start the application:

```bash
php -S localhost:8000
```

You can view the application at [http://localhost:8000](http://localhost:8000).

## Set up the database

Next, you need to set up your PlanetScale database and connect to it in the PHP application.

You can create a database either in the [PlanetScale dashboard](https://app.planetscale.com) or from the PlanetScale CLI. This guide will use the CLI, but you can follow the database setup instructions in the [PlanetScale quick start guide](/tutorials/planetscale-quick-start-guide#quick-start-with-the-planetscale-application) if you prefer the dashboard.

1. Authenticate the CLI with the following command:

```bash
pscale auth login
```

2. Create a new database with a default `main` branch with the following command:

```bash
pscale database create <DATABASE_NAME> --region <REGION_SLUG>
```

This tutorial uses `php-example` for `DATABASE_NAME`, but you can use any name with lowercase, alphanumeric characters, and dashes or underscores.

For `REGION_SLUG`, choose a region closest to you from the [available regions](/concepts/regions#available-regions) or leave it blank.

That's it! Your database is ready to use. Next, let's connect it to the PHP application and then add some data.

## Connect to the PHP app

There are **two ways to connect** to PlanetScale:

- Using the PlanetScale proxy with the CLI
- With an auto-generated username and password

Both options are covered below.

### Option 1: Connect with username and password

1. Create a username and password with the PlanetScale CLI by running:

```bash
pscale password create <DATABASE_NAME> <BRANCH_NAME> <PASSWORD_NAME>
```

A default branch, `main`, is created when you create the database, so you can use that for `BRANCH_NAME`.

<InfoBlock type='note'>
  The `PASSWORD_NAME` value represents the name of the username and password being generated. You can have multiple credentials for a branch, so this gives you a way to categorize them. To manage your passwords in the dashboard, go to your database overview page, click "Settings", and then click "Passwords".
</InfoBlock>

Take note of the values returned to you, as you won't be able to see this password again.

1. Open the `.env` file in your PHP app, find the database connection section, and replace the existing `DATABASE_URL` value with:

```
DATABASE_URL="mysql://<USERNAME>:<PASSWORD>@<ACCESS_HOST_URL>:3306/<DATABASE_NAME>?serverVersion=8.0"
```

Fill in `USERNAME`, `PASSWORD`, `ACCESS HOST URL` and `DATABASE_NAME` with the appropriate values from the CLI output above.

You can also get these exact values to to copy/paste from your PlanetScale dashboard. In the dashboard, click on the the branch you want to connect to (we're using `main`), click "**Connect**", and select "**PHP**" from the dropdown.

Refresh your PHP homepage and you should see the message that you're connected to your database!

### Option 2: Connect with the PlanetScale proxy

To connect with the PlanetScale proxy, you'll need the [PlanetScale CLI](https://github.com/planetscale/cli).

1. Open a connection by running the following:

```bash
pscale connect <DATABASE_NAME> <BRANCH_NAME>
```

If you're following this guide exactly and haven't created any branches, you can use the default branch, `main`.

2. A secure connection to your database will be established and you'll see a local address you can use to connect to your application.

3. Open the `.env` file in your PHP app and update it as follows:

```
HOST=127.0.0.1
PORT=3306 # Get this from the output of the previous step
DATABASE=
```

The connection uses port `3306` by default, but if that's being used, it will pick a random port. Make sure you paste in whatever port is returned in the terminal. Fill in the database name as well.

Refresh your PHP homepage and you should see the message that you're connected to your database!

## Add the schema and data

Now that you're connected to the database, let's create the `product` and `category` tables and add some data. There are a few ways to do this:

- PlanetScale CLI shell
- PlanetScale dashboard console
- Your favorite MySQL client (E.g. [Arctype](https://arctype.com/mysql/setup/planetscale-mac), TablePlus, DataGrip, etc.) 

The first two options are covered below.

### Add data with PlanetScale CLI

You can use the PlanetScale CLI to open a MySQL shell to interact with your database.

You may need to [install the MySQL command line client](/concepts/planetscale-environment-setup) if you haven't already.

1. Run the following command in your terminal:

```bash
pscale shell <DATABASE_NAME> <BRANCH_NAME>
```

This will open up a MySQL shell connected to the specified database and branch.

<InfoBlock type='note'>
  A branch, `main`, was automatically created when you created your database, so you can use that for `BRANCH_NAME`.
</InfoBlock>

2. Create the `product` table:

```sql
CREATE TABLE IF NOT EXISTS product (
id INT AUTO_INCREMENT NOT NULL,
name VARCHAR(255) NOT NULL,
description VARCHAR(255) NOT NULL,
image VARCHAR(255) NOT NULL,
category_id INT NOT NULL,
PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE `utf8mb4_unicode_ci` ENGINE = InnoDB;
```

3. Create the `category` table:

```sql
CREATE TABLE IF NOT EXISTS category (
id INT AUTO_INCREMENT NOT NULL,
name VARCHAR(255) NOT NULL,
description VARCHAR(255) NOT NULL,
PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE `utf8mb4_unicode_ci` ENGINE = InnoDB;
```

4. Add some records to the `product` table:

```sql
INSERT INTO `product` (name, description, image, category_id) VALUES
('Shoes', 'Description for shoes', 'https://via.placeholder.com/150.png', '1'),
('Hat', 'Description for Hats', 'https://via.placeholder.com/150.png', '1'),
('Bicycle', 'Description for Bicycle', 'https://via.placeholder.com/150.png', '4'),
```

The value `id` will be filled with a default value.

5. Add some data to the `category` table:

```sql
INSERT INTO `category` (name, description) VALUES
('Clothing', 'Description for Clothing'),
('Electronics', 'Description for Electronics'),
('Appliances', 'Description for Appliances'),
('Health', 'Description for Health'),
```

6. You can verify everything was added in the PlanetScale CLI MySQL shell with:

```sql
select * from product;
select * from category;
```

Type `exit` to exit the shell.

You can now refresh the [PHP homepage](http://localhost:8000) to see the new records. 

### Add data with PlanetScale dashboard console

If you don't care to install MySQL client or the PlanetScale CLI, another quick option using the MySQL console built into the PlanetScale dashboard.

1. Go to your [PlanetScale dashboard](https://app.planetscale.com) and select your PHP database.
2. Click on the "**Branches** and select the `main` branch (or whatever development branch you used).
3. Click on "**Console**"
4. Add data to the `product` table with:

```sql
INSERT INTO `product` (name, description, image, category_id) VALUES
('Shoes', 'Description for shoes', 'https://via.placeholder.com/150.png', '1'),
('Hat', 'Description for Hats', 'https://via.placeholder.com/150.png', '1'),
('Bicycle', 'Description for Bicycle', 'https://via.placeholder.com/150.png', '4'),
```

5. Add data to the `category` table with:

```sql
INSERT INTO `category` (name, description) VALUES
('Clothing', 'Description for Clothing'),
('Electronics', 'Description for Electronics'),
('Appliances', 'Description for Appliances'),
('Health', 'Description for Health'),
```

6. You can confirm that it was added by running:

```sql
select * from product;
select * from category;
```

You can now refresh the [PHP homepage](http://localhost:8000) to see the new record.

## What's next?

Once you're done with development, you can [promote your `main` branch to production](/concepts/branching#promote-the-main-database-branch) to get a highly available branch protected by direct schema changes.
Learn more about how PlanetScale allows you to make [non-blocking schema changes](/concepts/nonblocking-schema-changes) to your database tables without locking or causing downtime for production databases.

## Need help?

Get help from [PlanetScale's support team](https://planetscale.com/support), or join our [GitHub Discussion board](https://github.com/planetscale/beta/discussions) to see how others are using PlanetScale.